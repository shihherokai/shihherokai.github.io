<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>上傳</title>
</head>
<body>
  <p>傳檔案，拿網址，好棒棒</p>
  <div>
    <input type="file" id="fileButton" value="upload"/>
  </div>
  <div id="demo"></div>



<script src="https://www.gstatic.com/firebasejs/4.2.0/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDTiaPw5sHNQUYJ9HHzupXxXLDEESa3nyg",
    authDomain: "tripmatchwebsite.firebaseapp.com",
    databaseURL: "https://tripmatchwebsite.firebaseio.com",
    projectId: "tripmatchwebsite",
    storageBucket: "tripmatchwebsite.appspot.com",
    messagingSenderId: "1048936801714"
  };
  firebase.initializeApp(config);
</script>

<script>
  
var fileButton = document.getElementById('fileButton');
fileButton.addEventListener('change', function(e){
  var file = e.target.files[0];
  var storageRef = firebase.storage().ref('img/'+file.name);
  var task = storageRef.put(file);
  task.on('state_changed', function progress(snapshot) {
    }, function error(err) {
      console.log(err);
    },function complete() {
      storageRef.getDownloadURL().then(function(url) {
        /*顯示在網站上*/
        var show = document.querySelector("#demo");
        show.innerHTML = '上傳成功　:　' + url;
      });
  });
});  
  
  
</script>



</body>
</html>



